# ü§ñ Autonomous Browser Agent

Production-ready –≤–µ–±-–∞–≥–µ–Ω—Ç —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π ReAct (Reasoning + Acting), —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –∞–≤—Ç–æ–Ω–æ–º–Ω—É—é –Ω–∞–≤–∏–≥–∞—Ü–∏—é –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –≤–µ–±-—Å–∞–π—Ç–∞–º–∏ —á–µ—Ä–µ–∑ LLM-—É–ø—Ä–∞–≤–ª—è–µ–º—É—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é –±—Ä–∞—É–∑–µ—Ä–∞.

## –û –ø—Ä–æ–µ–∫—Ç–µ

–ê–≥–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Playwright –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–æ–º –∏ LLM (—á–µ—Ä–µ–∑ OpenRouter API) –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –ø—Ä–æ—Å—Ç—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤—ã—Ö –±–æ—Ç–æ–≤, –∞–≥–µ–Ω—Ç —Å–ø–æ—Å–æ–±–µ–Ω –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å DOM —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π –∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –±–µ–∑ –∂—ë—Å—Ç–∫–æ–π –ø—Ä–∏–≤—è–∑–∫–∏ –∫ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞–º.

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –∫–∞–∫ –º–æ–¥—É–ª—å–Ω—ã–π –º–æ–Ω–æ–ª–∏—Ç —Å —á—ë—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º —Å–ª–æ—ë–≤: –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è. –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ Dependency Injection, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ –≥–∏–±–∫–æ—Å—Ç—å.

## –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **ReAct Pattern**: –¶–∏–∫–ª Observe ‚Üí Think ‚Üí Act —Å reasoning –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ
- **11 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤**: navigate, click_element, type_text, upload_file, scroll_page, take_screenshot, wait, go_back, query_dom, store_context, done
- **Stealth Mode**: playwright-stealth –¥–ª—è –æ–±—Ö–æ–¥–∞ –±–∞–∑–æ–≤—ã—Ö –∞–Ω—Ç–∏–±–æ—Ç-—Å–∏—Å—Ç–µ–º
- **Smart Loop Detection**: –î–µ—Ç–µ–∫—Ü–∏—è –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏–π —Å –∞–Ω–∞–ª–∏–∑–æ–º (action + target + success)
- **Error Recovery**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–Ω–∏–º–∫–∏ (screenshot + HTML dump) –ø—Ä–∏ —Å–±–æ—è—Ö
- **Rate Limiting**: –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ LLM API (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 15 —Å–µ–∫ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏)
- **Context Management**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —à–∞–≥–∞–º–∏
- **Graceful Shutdown**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞ –ø—Ä–∏ SIGINT/SIGTERM

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º –º–æ–¥—É–ª—å–Ω–æ–≥–æ –º–æ–Ω–æ–ª–∏—Ç–∞ —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:

```
src/
‚îú‚îÄ‚îÄ config/              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (Pydantic Settings)
‚îú‚îÄ‚îÄ core/                # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ infrastructure/      # –ë—Ä–∞—É–∑–µ—Ä –∏ LLM —Å–µ—Ä–≤–∏—Å—ã
‚îú‚îÄ‚îÄ agent/               # ReAct –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä
‚îî‚îÄ‚îÄ utils/               # DOM processing
```

**–ü–æ–¥—Ä–æ–±–Ω–µ–µ**: [ARCHITECTURE.md](ARCHITECTURE.md)

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
git clone <repo-url>
cd refactored_agent
python3 -m venv venv && source venv/bin/activate
pip install -r requirements.txt
playwright install chromium

# 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å OPENAI_API_KEY –∏ MODEL_NAME

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å
python main.py
```

**–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è**: [QUICK_START.md](QUICK_START.md)

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ `.env`:

```env
# API (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
OPENAI_API_KEY=your_openrouter_api_key
API_BASE_URL=https://openrouter.ai/api/v1
MODEL_NAME=upstage/solar-pro-3:free

# –ë—Ä–∞—É–∑–µ—Ä
HEADLESS=false                    # true –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
SLOW_MO=50                        # –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –¥–µ–π—Å—Ç–≤–∏—è–º–∏ (–º—Å)
ENABLE_STEALTH=true               # playwright-stealth

# –ê–≥–µ–Ω—Ç
MAX_STEPS=50                      # –ª–∏–º–∏—Ç —à–∞–≥–æ–≤
TEMPERATURE=0.1                   # –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å LLM
MAX_TOKENS=1000                   # —Ä–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ LLM

# DOM –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
TEXT_BLOCK_MAX_LENGTH=200         # –æ–±—Ä–µ–∑–∫–∞ –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤
DOM_MAX_TOKENS_ESTIMATE=10000     # –ª–∏–º–∏—Ç —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è DOM

# Loop detection
LOOP_DETECTION_WINDOW=3           # –æ–∫–Ω–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
MAX_IDENTICAL_STATES=5            # —Ç–µ—Ä–ø–∏–º–æ—Å—Ç—å –∫ –ø–æ–≤—Ç–æ—Ä–∞–º
```

–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ [.env.example](.env.example)

## –ü—Ä–∏–º–µ—Ä—ã –∑–∞–¥–∞—á

–ê–≥–µ–Ω—Ç –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∏–ø—ã –∑–∞–¥–∞—á:

**–ù–∞–≤–∏–≥–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫**:
```
–ó–∞–¥–∞—á–∞: –ù–∞–π–¥–∏ —Å—Ç–∞—Ç—å—é –ø—Ä–æ Python –Ω–∞ –≤–∏–∫–∏–ø–µ–¥–∏–∏ –∏ —Å–∫–∞–∂–∏ –≥–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è —è–∑—ã–∫–∞
URL: https://wikipedia.org
```

**–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º**:
```
–ó–∞–¥–∞—á–∞: –ù–∞–π–¥–∏ —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –∑–∞–ø–æ–ª–Ω–∏ –ø–æ–ª—è (–∏–º—è: Test, email: test@example.com)
```

**–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**:
```
–ó–∞–¥–∞—á–∞: –ù–∞–π–¥–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤—Å–µ —Ü–µ–Ω—ã —Ç–æ–≤–∞—Ä–æ–≤ –∏ —Å–æ—Ö—Ä–∞–Ω–∏ –∏—Ö
```

**–ú–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏**:
```
–ó–∞–¥–∞—á–∞: –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ hacker news, –æ—Ç–∫—Ä–æ–π –ø–µ—Ä–≤—É—é —Å—Ç–∞—Ç—å—é, –ø—Ä–æ—á–∏—Ç–∞–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –ø–µ—Ä–≤—ã–π –∞–±–∑–∞—Ü
URL: https://news.ycombinator.com
```

**–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å UI**:
```
–ó–∞–¥–∞—á–∞: –ù–∞–π–¥–∏ –∫–Ω–æ–ø–∫—É "Load More" –∏ –∫–ª–∏–∫–Ω–∏ –µ—ë 3 —Ä–∞–∑–∞, –∑–∞—Ç–µ–º —Å–æ—Ö—Ä–∞–Ω–∏ —Å–ø–∏—Å–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ main.py                      # Entry point —Å signal handling
‚îú‚îÄ‚îÄ comprehensive_completion.py  # –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π entry point
‚îú‚îÄ‚îÄ requirements.txt             # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env.example                 # –®–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ .gitignore                   # Git exclusions
‚îÇ
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ settings.py          # Pydantic Settings —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py            # AgentAction, TaskResult, ObservationState
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ exceptions.py        # –ò–µ—Ä–∞—Ä—Ö–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ infrastructure/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ browser.py           # BrowserService (Playwright)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ llm.py               # LLMService (OpenAI/OpenRouter API)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ agent/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ orchestrator.py      # ReAct —Ü–∏–∫–ª (observe/think/act)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îú‚îÄ‚îÄ dom.py               # DOM tree shaking –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
‚îÇ       ‚îî‚îÄ‚îÄ __init__.py
‚îÇ
‚îú‚îÄ‚îÄ browser_data/                # Persistent browser session (—Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ)
‚îú‚îÄ‚îÄ screenshots/                 # Error snapshots (—Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ)
‚îú‚îÄ‚îÄ agent.log                    # –õ–æ–≥ —Ñ–∞–π–ª (—Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ)
‚îú‚îÄ‚îÄ QUICK_START.md               # –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
‚îú‚îÄ‚îÄ ARCHITECTURE.md              # –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ LICENSE.md                   # MIT License
```

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ**:
- LLM –º–æ–∂–µ—Ç –≥–∞–ª–ª—é—Ü–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å CAPTCHA (—Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è)
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ iframe (–Ω—É–∂–µ–Ω workaround)
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ SPA –º–æ–≥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å timing

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**:
- Stealth mode –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –æ–±—Ö–æ–¥ –≤—Å–µ—Ö –∞–Ω—Ç–∏–±–æ—Ç-—Å–∏—Å—Ç–µ–º
- –ù–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –æ–±—Ö–æ–¥–∞ –∑–∞—â–∏—Ç—ã —Å–∞–π—Ç–æ–≤ —Å –∞–∫—Ç–∏–≤–Ω–æ–π –∑–∞—â–∏—Ç–æ–π
- Rate limiting –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö API

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**:
- –ö–∞–∂–¥—ã–π —à–∞–≥ = 1 LLM –∑–∞–ø—Ä–æ—Å (15-30 —Å–µ–∫ –ø—Ä–∏ rate limiting)
- DOM processing –¥–æ–±–∞–≤–ª—è–µ—Ç overhead –Ω–∞ –±–æ–ª—å—à–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö
- –ú–µ–¥–ª–µ–Ω–Ω–µ–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–∫—Ä–∞–ø–µ—Ä–æ–≤ —Å —Ö–∞—Ä–¥–∫–æ–¥–æ–º

**–ß—Ç–æ –∞–≥–µ–Ω—Ç –ù–ï —É–º–µ–µ—Ç**:
- –†–∞–±–æ—Ç–∞—Ç—å —Å –º–æ–±–∏–ª—å–Ω—ã–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏
- –û–±—Ö–æ–¥–∏—Ç—å –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
- –†–µ—à–∞—Ç—å CAPTCHA –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å WebSocket –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License ‚Äî —Å–º. [LICENSE.md](LICENSE.md)

---

**Python**: 3.10+  
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: Playwright 1.40+, OpenAI SDK 1.0+, Pydantic 2.0+
